{"version":3,"sources":["components/TextBar.js","GlobalState.js","actions/actionType.js","components/Button.js","actions/actions.js","App.js","index.js"],"names":["Comp","callback","globalState","score","dispatch","action","reducer","i","length","notifyAll","type","Object","objectSpread","payload","Button","Math","random","console","log","react_default","a","createElement","className","onClick","this","changeScore","React","Component","TextBar","props","connect","_React$Component2","Wrapper","_getPrototypeOf2","_this","classCallCheck","_len","arguments","args","Array","_key","possibleConstructorReturn","getPrototypeOf","call","apply","concat","updateState","setState","inherits","createClass","key","value","cb","push","state","App","style","marginTop","components_TextBar","components_Button","ReactDOM","render","src_App","document","getElementById"],"mappings":"oGAcgBA,4ECZVC,EAAW,GAENC,EAAc,CAAEC,MAAO,KAerBC,EAAW,SAAAC,GAEtBH,EAAcI,EAAQJ,EAAaG,GAdnB,WAChB,IAAK,IAAIE,EAAI,EAAGA,EAAIN,EAASO,OAAQD,IACnCN,EAASM,GAAGL,GAadO,IAIIH,EAAU,SAACJ,EAAaG,GAC5B,OAAQA,EAAOK,MACb,IC5BwB,eD6BtB,OAAOC,OAAAC,EAAA,EAAAD,CAAA,GAAKT,EAAZ,CAAyBC,MAAOE,EAAOQ,UACzC,QACE,OAAOX,IEZEY,wLCjBY,IAAAX,EDIvBC,GCJuBD,EDIFY,KAAKC,SCH5BC,QAAQC,IAAI,sBACL,CACLR,KFLwB,eEMxBG,QAASV,sCDIT,OACEgB,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAAA,UAAQC,UAAU,oBAAoBC,QAASC,KAAKC,aAApD,iBARaC,IAAMC,WHDrBC,mLAEF,OACET,EAAAC,EAAAC,cAAA,OAAKC,UAAU,cACbH,EAAAC,EAAAC,cAAA,SAAIG,KAAKK,MAAM1B,eAJDuB,IAAMC,WA+BbG,GApBC9B,EAoBO4B,EAnBrBX,QAAQC,IAAI,8BADU,SAAAa,GAAA,SAAAC,IAAA,IAAAC,EAAAC,EAAAvB,OAAAwB,EAAA,EAAAxB,CAAAa,KAAAQ,GAAA,QAAAI,EAAAC,UAAA7B,OAAA8B,EAAA,IAAAC,MAAAH,GAAAI,EAAA,EAAAA,EAAAJ,EAAAI,IAAAF,EAAAE,GAAAH,UAAAG,GAAA,OAAAN,EAAAvB,OAAA8B,EAAA,EAAA9B,CAAAa,MAAAS,EAAAtB,OAAA+B,EAAA,EAAA/B,CAAAqB,IAAAW,KAAAC,MAAAX,EAAA,CAAAT,MAAAqB,OAAAP,MAQpBQ,YAAc,SAAA5C,GAEZgC,EAAKa,SAAS7C,IAVIgC,EAAA,OAAAvB,OAAAqC,EAAA,EAAArC,CAAAqB,EAAAD,GAAApB,OAAAsC,EAAA,EAAAtC,CAAAqB,EAAA,EAAAkB,IAAA,oBAAAC,MAAA,WCAC,IAAAC,IDKT5B,KAAKsB,YCJnB7C,EAASoD,KAAKD,KDDQ,CAAAF,IAAA,SAAAC,MAAA,WAclB,OAAOhC,EAAAC,EAAAC,cAACrB,EAASwB,KAAK8B,WAdJtB,EAAA,CAEAN,IAAMC,YKCf4B,mLAXX,OACEpC,EAAAC,EAAAC,cAAA,OAAKC,UAAU,eAAekC,MAAO,CAAEC,UAAW,SAChDtC,EAAAC,EAAAC,cAAA,OAAKC,UAAU,sBACbH,EAAAC,EAAAC,cAACqC,EAAD,OAEFvC,EAAAC,EAAAC,cAACsC,EAAD,cAPUjC,IAAMC,WCAxBiC,IAASC,OAAO1C,EAAAC,EAAAC,cAACyC,EAAD,MAASC,SAASC,eAAe","file":"static/js/main.0d5b5df5.chunk.js","sourcesContent":["import React from \"react\";\nimport { subscribe } from \"../GlobalState.js\";\n\nclass TextBar extends React.Component {\n  render() {\n    return (\n      <div className=\"ui content\">\n        <p>{this.props.score}</p>\n      </div>\n    );\n  }\n}\n\n// HOC，把'接收改變通知'的原件與'存放狀態'的原件連結(connect)在一起\nconst connect = Comp => {\n  console.log(\"connect global and TextBar\");\n  class Wrapper extends React.Component {\n    // state = {score: 456}\n    componentDidMount() {\n      subscribe(this.updateState);\n    }\n\n    updateState = globalState => {\n      // test: 1, nas: 2\n      this.setState(globalState);\n    };\n\n    render() {\n      return <Comp {...this.state} />; // <Comp test={1} nas={2} /> 解構賦值\n    }\n  }\n  return Wrapper;\n};\n\nexport default connect(TextBar);","import { UPDATE_SCORE } from \"./actions/actionType.js\";\n\nconst callback = [];\n\nexport let globalState = { score: 123 };\n\n//通知所有有訂閱的元件、並執行訂閱元件中\"收到改變通知\"後的callback function\nconst notifyAll = () => {\n  for (let i = 0; i < callback.length; i++) {\n    callback[i](globalState);\n  }\n};\n\n//訂閱、接收狀態改變的元件\nexport const subscribe = cb => {\n  callback.push(cb);\n};\n\n//主動改變狀態的元件中，負責改變狀態的函數，狀態改變後通知訂閱元件\nexport const dispatch = action => {\n  // new state = reducer(currentState, action)\n  globalState = reducer(globalState, action);\n  notifyAll();\n};\n\n//負責接收舊狀態與行動、並判斷行動是否會改變狀態，最後回傳狀態\nconst reducer = (globalState, action) => {\n  switch (action.type) {\n    case UPDATE_SCORE:\n      return { ...globalState, score: action.payload };\n    default:\n      return globalState;\n  }\n};\n","export const UPDATE_SCORE = 'UPDATE_SCORE';","import React from \"react\";\nimport { dispatch } from \"../GlobalState.js\";\nimport { updateScore } from \"../actions/actions.js\";\n\nclass Button extends React.Component {\n  changeScore() {\n    dispatch(updateScore(Math.random()));\n  }\n\n  render() {\n    return (\n      <div>\n        <button className=\"ui primary button\" onClick={this.changeScore}>\n          Click\n        </button>\n      </div>\n    );\n  }\n}\nexport default Button;","import { UPDATE_SCORE } from \"./actionType.js\";\n\nexport const updateScore = score => {\n  console.log(\"creating action...\");\n  return {\n    type: UPDATE_SCORE,\n    payload: score\n  };\n};\n","import React from \"react\";\nimport Button from \"./components/Button.js\";\nimport TextBar from \"./components/TextBar.js\";\n\nclass App extends React.Component {\n  render() {\n    return (\n      <div className=\"ui container\" style={{ marginTop: \"20px\" }}>\n        <div className=\"ui visible message\">\n          <TextBar />\n        </div>\n        <Button />\n      </div>\n    );\n  }\n}\n\nexport default App;","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));"],"sourceRoot":""}